/**
 * Embed videos using AngularJS directives
 * @version v0.1.1 - 2013-02-21
 * @link 
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
angular.module("embedplayer",[]),angular.module("embedplayer").service("PlayerConfig",function(){this.createInstance=function(e){var t=function(e){this.playerRegExp=e.playerRegExp,this.whitelist=e.whitelist,this.config={width:560,height:315,playerID:e.playerID,options:e.options},this.isPlayerFromURL=function(e){return e.match(this.playerRegExp)!=null}};return new t(e)}}),angular.module("embedplayer").factory("RegisteredPlayers",function(e){var t={youtube:{options:{autoplay:0,controls:1,loop:0},whitelist:["autoplay","controls","loop","playlist"],playerID:"http://www.youtube.com/embed/",playerRegExp:/http:\/\/www\.youtube\.com\/watch\?v=([A-Za-z0-9\-\_]+)/},vimeo:{options:{autoplay:0,loop:0},whitelist:["autoplay","color","loop"],playerID:"http://player.vimeo.com/video/",playerRegExp:/http:\/\/vimeo\.com\/([A-Za-z0-9]+)/},dailymotion:{options:{autoPlay:0,logo:0},whitelist:["autoPlay","logo","forceQuality"],playerID:"http://www.dailymotion.com/embed/video/",playerRegExp:/http:\/\/www\.dailymotion\.com\/video\/([A-Za-z0-9]+)/}},n=[];return angular.forEach(t,function(t){n.push(e.createInstance(t))}),n}),angular.module("embedplayer").directive("embedVideo",function(e,t){return{restrict:"A",template:'<iframe width="{{config.width}}" height="{{config.height}}" src="{{config.playerID}}{{videoID}}{{config.options | videoOptions}}" frameborder="0"></iframe>',scope:{},replace:!0,link:function(n,r,i){var s=i.href,o=null;angular.forEach(t,function(e){e.isPlayerFromURL(s)&&(o=e)}),n.videoID=s.match(o.playerRegExp)[1],n.config=o.config,n.config.height=i.height&&parseInt(i.height)||n.config.height,n.config.width=i.width&&parseInt(i.width)||n.config.width,angular.forEach(e("whitelist")(i,o.whitelist),function(e,t){n.config.options[t]=e})}}}),angular.module("embedplayer").filter("videoOptions",function(){return function(e){var t=[];return angular.forEach(e,function(e,n){t.push([n,e].join("="))}),"?"+t.join("&")}}),angular.module("embedplayer").filter("whitelist",function(){return function(e,t){var n={};return angular.forEach(e,function(e,r){t.indexOf(r)!=-1&&(n[r]=e)}),n}});